# 🥷 StealthPath 更新日志 / Release Notes

## 🆕 本次版本（持续维护）
- ✅ 这个文件会作为每次 GitHub Release 的说明文本。
- 📝 需要写“本次新增/修复”时，直接在这里追加即可（保留下面的“功能总览”）。
- 🔄 更新弹窗增强：支持展示可下载文件（assets）、镜像下载开关、下载并重启（桌面端）。

## 🚀 v5.1.0
- 🧭 优化更新检测交互：`下载并重启` 直接进入内置下载流程，不再回退到浏览器链接。
- 📊 新增下载进度弹窗：显示百分比、已下载/总大小、实时下载速度。
- 🔁 下载完成后直接替换 mods 目录中的当前模组文件并自动重启。
- 🌐 修复镜像源开关在部分下载地址场景下不生效的问题。

## 🚀 v5.0.0（重大更新）
- 🧠 路径代价/伤害统一改为“可配置地按最慢单位”计算，并在高级设置新增开关。
- 🌊 液体地块会在规划阶段纳入沉没可行性判断，避免执行 RTS 后中途反向重规划。
- 🧊 地块状态减速（如水/冷冻液）可参与速度估算，矿渣等地块伤害按实际通过时间累加。
- ⚙️ 高级设置新增三项：最慢单位代价、地块状态减速、可生存液体穿越。

## ✨ 功能总览（历史累计）
- 🗺️ **路径叠加显示**：按键快速计算并在地图上绘制路线（可调线宽/透明度/显示时长）。
- ⚔️ **威胁计算**：根据敌方炮塔与单位射程/估算 DPS 生成威胁地图，并按移动速度换算预计受伤。
- 🧠 **寻路策略**：
  - 🟢 优先 0 受伤路径（Safe Only），找不到再退化为最小受伤路径（Min Damage）。
  - 📏 可选“始终规划最近路径”（Nearest）：忽略伤害，直接按最短路规划。
  - 🔁 可选寻路算法：A* / DFS（都按当前模式代价选择最优）。
- 🎯 **多目标核心预览**：核心模式可同时规划到最近的 K 个敌方核心（K 可在设置中调整）。
- 🤖 **自动模式（单位集群）**：
  - 🧩 选中单位会按距离自动分割为多个集群规划。
  - ⏱️ 自动模式寻路支持“分拆计算到 Tick”，减少卡顿。
  - 🛰️ RTS 自动移动：支持路点上限、更新间隔、指令间隔（减轻服务器 DoS 误判）。
- 🪟 **OverlayUI 窗口**：与 MindustryX OverlayUI 兼容（或回退 HUD），可显示模式/威胁与预计受伤，并提供快捷按钮。
- 🛡️ **绕开无敌盾范围**：规划时会将 `shield-projector` / `large-shield-projector` 盾域视作不可通行区域（防止卡住/穿不过）。
- ⚙️ **设置菜单**：MindustryX 风格的单页设置 + Pro Mode 高级选项（可展开/折叠）。
- 🌐 **多人兼容**：`hidden: true` 纯客户端显示/辅助逻辑，避免多人服 mod 校验冲突。
- 🔔 **启动检测更新**：启动后检查 GitHub Releases 是否有新版本，有则弹窗提示并支持跳转/忽略。

## 🔗 链接
- GitHub Releases：https://github.com/DeterMination-Wind/StealthPath/releases
